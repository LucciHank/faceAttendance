<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Nhân Viên</title>
    <style>
      @font-face {
        font-family: 'Space Habitat';
        src: url('/static/fonts/DFVN MBF Space Habitat Regular.otf') format('opentype');
      }
      
      @font-face {
        font-family: 'Roboto Light';
        src: url('/static/fonts/Roboto-Light.ttf') format('truetype');
      }
      
      @font-face {
        font-family: 'Roboto Regular';
        src: url('/static/fonts/Roboto-Regular.ttf') format('truetype');
      }
      
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        width: 100%;
        height: 100vh;
        background-image: url('/static/images/bgr.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        color: white;
        font-family: 'Roboto Regular', sans-serif;
        position: relative;
      }
      
      .top-buttons {
        top: 20px;
        margin-bottom: 100px;
        margin-left: 1000px;
        display: flex;
        gap: 15px;
        width: 100%;
        justify-content: center;
        padding: 0 20px;
        max-width: 1200px;
      }
      
      .back-btn, .register-btn {
        padding: 10px 20px;
        background-color: rgba(255, 255, 255, 0.7);
        border-radius: 30px;
        font-family: 'Roboto Light', sans-serif;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
      }
      
      .back-btn:hover, .register-btn:hover {
        background-color: rgba(255, 255, 255, 0.8);
      }
      
      .main-container {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        max-width: 1200px;
        position: relative;
      }
      
      .camera-container {
        width: 650px;
        height: 400px;
        border-radius: 20px;
        background-color: #0c2973;
        border: 5px solid #0c2973;
        box-shadow: 0 0 30px rgba(0, 106, 255, 0.4);
        position: relative;
        overflow: hidden;
      }
      
      .camera-inner {
        width: calc(100% - 10px);
        height: calc(100% - 10px);
        margin: 5px;
        border-radius: 15px;
        overflow: hidden;
        background-color: #041640;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      
      .camera-feed {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      
      .camera-status {
        position: absolute;
        bottom: 15px;
        left: 0;
        right: 0;
        text-align: center;
        font-family: 'Roboto Regular', sans-serif;
        font-size: 18px;
        color: white;
      }
      
      .create-employee {
        position: absolute;
        left: -100px;
        top: 50%;
        transform: translateY(-50%);
        text-align: right;
      }
      
      .create-employee h1 {
        font-family: 'Space Habitat', sans-serif;
        font-size: 70px;
        line-height: 0.9;
        letter-spacing: 2px;
        font-weight: normal;
        margin-bottom: 20px;
      }
      
      .instructions {
        position: absolute;
        right: -180px;
        top: 50%;
        transform: translateY(-50%);
        text-align: left;
      }
      
      .instructions h2 {
        font-family: 'Space Habitat', sans-serif;
        font-size: 35px;
        margin-bottom: 15px;
        font-weight: normal;
      }
      
      .instructions ol {
        list-style-type: decimal;
        margin-left: 15px;
        font-family: 'Roboto Regular', sans-serif;
        font-size: 22px;
        line-height: 1.5;
        margin-bottom: 20px;
      }
      
      .footer {
        position: absolute;
        bottom: 30px;
        font-family: 'Space Habitat', sans-serif;
        font-size: 20px;
        letter-spacing: 2px;
      }
    </style>
  </head>
  <body>
    <div class="top-buttons">
      <div class="back-btn" id="backBtn">
        < Quay lại
      </div>
      <div class="register-btn" id="registerBtn">
        + Đăng ký nhân viên
      </div>
    </div>
    
    <div class="main-container">
      <div class="create-employee">
        <h1>
          TẠO<br>
          NHÂN<br>
          VIÊN
        </h1>
      </div>
      
      <div class="camera-container">
        <div class="camera-inner">
          <img id="video" class="camera-feed" src="{{ url_for('video_feed') }}" alt="Camera Feed">
          <div class="camera-status" id="status">Đang xác minh..</div>
        </div>
      </div>
      
      <div class="instructions">
        <h2>HƯỚNG DẪN</h2>
        <ol>
          <li>Nhân viên đứng trước mặt camera</li>
          <li>Hệ thống tự chụp số lượng ảnh cần
          <br>thiết để nhận dạng </i>
        </ol>
      </div>
    </div>
    
    <div class="footer">LUCCYHANK</div>
    
    <script>
      // Xử lý sự kiện nút Quay lại
      document.getElementById('backBtn').addEventListener('click', function() {
        window.location.href = '/';
      });
      
      // Xử lý sự kiện nút Đăng ký nhân viên
      document.getElementById('registerBtn').addEventListener('click', function() {
        // Hiển thị form đăng ký hoặc thực hiện hành động đăng ký
        const employeeName = prompt('Nhập tên nhân viên:');
        if (employeeName) {
          registerEmployee(employeeName);
        }
      });
      
      function registerEmployee(name) {
        const formData = new FormData();
        formData.append('name', name);
        
        fetch('/api/register_employee', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          alert(data.message || 'Đăng ký nhân viên thành công');
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Đã xảy ra lỗi khi đăng ký nhân viên.');
        });
      }
    </script>
  </body>
</html>
